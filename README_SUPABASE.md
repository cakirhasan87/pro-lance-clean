# Supabase Integration for Contact Form

This document explains how to set up Supabase to store contact form submissions from your website.

## Setup Instructions

### 1. Create a Supabase Account and Project

1. Go to [https://supabase.com/](https://supabase.com/) and sign up for an account
2. Create a new project
3. Note down your project URL and anon/public key (you'll need these later)

### 2. Create a Table for Contact Form Submissions

1. In your Supabase dashboard, go to the SQL Editor
2. Run the following SQL to create a table for contact form submissions:

```sql
CREATE TABLE contact_submissions (
  id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  name TEXT NOT NULL,
  email TEXT NOT NULL,
  phone TEXT,
  subject TEXT NOT NULL,
  message TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'new',
  notes TEXT
);

-- Add RLS (Row Level Security) policies
ALTER TABLE contact_submissions ENABLE ROW LEVEL SECURITY;

-- Only allow inserts from anonymous users (for the contact form)
CREATE POLICY "Allow anonymous inserts" ON contact_submissions
  FOR INSERT TO anon
  WITH CHECK (true);

-- Only allow authorized users to view and update submissions
CREATE POLICY "Allow authorized viewing" ON contact_submissions
  FOR SELECT TO authenticated
  USING (true);

CREATE POLICY "Allow authorized updates" ON contact_submissions
  FOR UPDATE TO authenticated
  USING (true)
  WITH CHECK (true);
```

### 3. Update Environment Variables

Edit the `.env` file in your project directory and add your Supabase credentials:

```
SUPABASE_URL=https://your-project-id.supabase.co
SUPABASE_KEY=your-anon-key
```

### 4. Test the Integration

1. Start your Flask app with `python app.py`
2. Go to the contact page and submit a test form
3. Check your Supabase dashboard to see if the data was stored correctly

## How It Works

1. When a user submits the contact form, JavaScript on the page sends the data to the `/api/contact` endpoint
2. The Flask backend validates the data and then stores it in Supabase
3. A success or error message is displayed to the user

## Building an Admin Dashboard (Future Enhancement)

To view and manage contact submissions, consider adding an admin dashboard:

1. Create an admin login page using Supabase authentication
2. Build an admin dashboard page that fetches and displays submissions
3. Add functionality to update status, add notes, or delete submissions 